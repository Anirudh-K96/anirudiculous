<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Anirudh Kosgi | Personal Card</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Manrope:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <link rel="icon" type="image/svg+xml" href="assets/favicon.svg">
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <div class="banner">
    <canvas id="constellationCanvas" class="constellation-canvas" aria-hidden="true"></canvas>
    <div class="shooting-stars" aria-hidden="true">
      <span></span><span></span><span></span><span></span>
      <span></span><span></span><span></span><span></span>
      <span></span><span></span><span></span><span></span>
      <span></span><span></span><span></span><span></span>
    </div>
  </div>
  <button class="constellation-toggle" id="constellationToggle" aria-label="Toggle constellation overlay" title="Toggle constellation" aria-pressed="false">
    <svg class="icon-constellation" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false">
      <path fill="currentColor" d="M5 16a2 2 0 1 0 0-4 2 2 0 0 0 0 4zm7-6a2 2 0 1 0 0-4 2 2 0 0 0 0 4zm7 10a2 2 0 1 0 0-4 2 2 0 0 0 0 4zM6.7 12.9l3.8-2.3m2.8-.9l3.7 5.1" stroke="currentColor" stroke-width="1.2" fill="none" stroke-linecap="round" stroke-linejoin="round"/>
    </svg>
  </button>
  <button class="theme-toggle" id="themeToggle" aria-label="Toggle theme" title="Toggle theme" aria-pressed="false">
    <svg class="icon-sun" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false"><path fill="currentColor" d="M6.76 4.84l-1.8-1.79L3.17 4.84l1.79 1.79 1.8-1.79zm10.48 0l1.79-1.79 1.79 1.79-1.79 1.79-1.79-1.79zM12 4V1h0a1 1 0 0 1 1 1v2a1 1 0 1 1-2 0zm0 19a1 1 0 0 1-1-1v-2a1 1 0 1 1 2 0v2a1 1 0 0 1-1 1zM4 13H2a1 1 0 1 1 0-2h2a1 1 0 1 1 0 2zm18 0h-2a1 1 0 1 1 0-2h2a1 1 0 1 1 0 2zM6.76 19.16l-1.8 1.79-1.79-1.79 1.79-1.79 1.8 1.79zm12.1 0l-1.79 1.79-1.79-1.79 1.79-1.79 1.79 1.79zM12 18a6 6 0 1 1 0-12 6 6 0 0 1 0 12z"/></svg>
    <svg class="icon-moon" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false"><path fill="currentColor" d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/></svg>
  </button>
  <main class="card">
    <section class="profile">
      <img class="avatar" src="assets/profile.jpg" alt="Portrait of Anirudh Kosgi">
      <div class="identity">
        <h1>Anirudh Kosgi</h1>
        <p class="subtitle">Electrical Engineering, Dayananda Sagar College of Engineering, Bengaluru, India</p>
        <p class="bio">If it's not broken, I'll find a way to improve it until it is.<br>Arch Btw</p>
        <ul class="socials">
          <li>
            <a href="https://x.com/An1rudh_xe" target="_blank" rel="noopener" aria-label="X (Twitter)">
              <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
                <path d="M18.244 2H21.5l-7.47 8.54L23 22h-6.828l-5.34-6.46L4.6 22H1.34l7.98-9.12L1 2h6.93l4.82 5.94L18.244 2zm-1.194 18h2.19L7.05 4h-2.26l12.26 16z"/>
              </svg>
            </a>
          </li>
          <li>
            <a href="https://linkedin.com/in/anirudh-kosgi" target="_blank" rel="noopener" aria-label="LinkedIn">
              <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
                <path d="M4.98 3.5C4.98 4.88 3.86 6 2.5 6S0 4.88 0 3.5 1.12 1 2.5 1s2.48 1.12 2.48 2.5zM0 8h5v16H0V8zm7.5 0h4.8v2.2h.07c.67-1.27 2.3-2.6 4.73-2.6 5.05 0 5.98 3.32 5.98 7.64V24h-5V16.4c0-1.8-.03-4.1-2.5-4.1-2.5 0-2.88 1.95-2.88 3.97V24h-5V8z"/>
              </svg>
            </a>
          </li>
          <li>
            <a href="https://github.com/Anirudh-K96" target="_blank" rel="noopener" aria-label="GitHub">
              <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
                <path d="M12 .5C5.73.5.98 5.24.98 11.51c0 4.85 3.15 8.96 7.51 10.41.55.1.75-.24.75-.53 0-.26-.01-1.13-.02-2.05-3.05.66-3.7-1.29-3.7-1.29-.5-1.28-1.22-1.63-1.22-1.63-1-.68.07-.67.07-.67 1.1.08 1.68 1.13 1.68 1.13.98 1.67 2.57 1.19 3.2.91.1-.72.38-1.2.69-1.47-2.44-.28-5.01-1.22-5.01-5.44 0-1.2.43-2.18 1.13-2.95-.11-.28-.49-1.42.11-2.96 0 0 .92-.29 3.02 1.12.87-.24 1.8-.36 2.73-.37.93.01 1.86.13 2.73.37 2.09-1.41 3.01-1.12 3.01-1.12.6 1.54.22 2.68.11 2.96.7.77 1.12 1.75 1.12 2.95 0 4.23-2.58 5.15-5.04 5.42.39.33.74.98.74 1.98 0 1.43-.01 2.58-.01 2.93 0 .29.2.64.76.53A10.53 10.53 0 0 0 23.02 11.5C23.02 5.24 18.27.5 12 .5z"/>
              </svg>
            </a>
          </li>
        </ul>
        <div class="actions">
          <a class="btn secondary" href="#contact" id="contactBtn">Contact</a>
        </div>
      </div>
    </section>

    <section class="section" id="verified">
      <h2>Verified Accounts</h2>
      <ul class="verified-list">
        <li class="platform-x">
          <span class="label">
            <svg class="brand" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" focusable="false">
              <path d="M18.244 2H21.5l-7.47 8.54L23 22h-6.828l-5.34-6.46L4.6 22H1.34l7.98-9.12L1 2h6.93l4.82 5.94L18.244 2zm-1.194 18h2.19L7.05 4h-2.26l12.26 16z"/>
            </svg>
            X
            <span class="verified-badge" aria-label="Verified on X">
              <svg width="10" height="10" viewBox="0 0 12 12" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false">
                <path fill="#fff" d="M4.7 8.3 2.9 6.5l.9-.9 1 1 3.3-3.3.9.9z"/>
              </svg>
            </span>
          </span>
          <a href="https://x.com/An1rudh_xe" target="_blank" rel="noopener">x.com/An1rudh_xe</a>
        </li>
        <li class="platform-linkedin">
          <span class="label">
            <svg class="brand" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" focusable="false">
              <path d="M4.98 3.5C4.98 4.88 3.86 6 2.5 6S0 4.88 0 3.5 1.12 1 2.5 1s2.48 1.12 2.48 2.5zM0 8h5v16H0V8zm7.5 0h4.8v2.2h.07c.67-1.27 2.3-2.6 4.73-2.6 5.05 0 5.98 3.32 5.98 7.64V24h-5V16.4c0-1.8-.03-4.1-2.5-4.1-2.5 0-2.88 1.95-2.88 3.97V24h-5V8z"/>
            </svg>
            LinkedIn
            <span class="verified-badge" aria-label="Verified on LinkedIn">
              <svg width="10" height="10" viewBox="0 0 12 12" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false">
                <path fill="#fff" d="M4.7 8.3 2.9 6.5l.9-.9 1 1 3.3-3.3.9.9z"/>
              </svg>
            </span>
          </span>
          <a href="https://linkedin.com/in/anirudh-kosgi" target="_blank" rel="noopener">linkedin.com/in/anirudh-kosgi</a>
        </li>
        <li class="platform-github">
          <span class="label">
            <svg class="brand" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" focusable="false">
              <path d="M12 .5C5.73.5.98 5.24.98 11.51c0 4.85 3.15 8.96 7.51 10.41.55.1.75-.24.75-.53 0-.26-.01-1.13-.02-2.05-3.05.66-3.7-1.29-3.7-1.29-.5-1.28-1.22-1.63-1.22-1.63-1-.68.07-.67.07-.67 1.1.08 1.68 1.13 1.68 1.13.98 1.67 2.57 1.19 3.2.91.1-.72.38-1.2.69-1.47-2.44-.28-5.01-1.22-5.01-5.44 0-1.2.43-2.18 1.13-2.95-.11-.28-.49-1.42.11-2.96 0 0 .92-.29 3.02 1.12.87-.24 1.8-.36 2.73-.37.93.01 1.86.13 2.73.37 2.09-1.41 3.01-1.12 3.01-1.12.6 1.54.22 2.68.11 2.96.7.77 1.12 1.75 1.12 2.95 0 4.23-2.58 5.15-5.04 5.42.39.33.74.98.74 1.98 0 1.43-.01 2.58-.01 2.93 0 .29.2.64.76.53A10.53 10.53 0 0 0 23.02 11.5C23.02 5.24 18.27.5 12 .5z"/>
            </svg>
            GitHub
            <span class="verified-badge" aria-label="Verified on GitHub">
              <svg width="10" height="10" viewBox="0 0 12 12" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false">
                <path fill="#fff" d="M4.7 8.3 2.9 6.5l.9-.9 1 1 3.3-3.3.9.9z"/>
              </svg>
            </span>
          </span>
          <a href="https://github.com/Anirudh-K96" target="_blank" rel="noopener">github.com/Anirudh-K96</a>
        </li>
      </ul>
    </section>

    <section class="section interests" id="interests">
      <h2>Interests</h2>
      <div class="interest-tags">
        <span>linux</span>
        <span>programming</span>
        <span>web development</span>
        <span>gaming</span>
      </div>
    </section>
  </main>

  <div class="modal" id="contactModal" aria-hidden="true" role="dialog" aria-labelledby="contactTitle">
    <div class="modal-dialog" role="document" tabindex="-1">
      <button class="modal-close" aria-label="Close" data-close>&times;</button>
      <h3 id="contactTitle">Contact</h3>
      <p class="contact-email">
        <a href="mailto:anirudh.kosgi@gmail.com">anirudh.kosgi@gmail.com</a>
        <button class="copy-btn" id="copyEmail" type="button">Copy</button>
        <span class="copy-status" id="copyStatus" hidden>Copied!</span>
      </p>
    </div>
  </div>

  <script>
    document.addEventListener('DOMContentLoaded', () => {
      // Randomize banner background image each load
      (function() {
        const banner = document.querySelector('.banner');
        if (!banner) return;
        const choices = ['assets/banner.jpg', 'assets/banner2.jpg'];
        const pick = choices[Math.floor(Math.random() * choices.length)];
        banner.style.background = `url('${pick}') center/cover no-repeat`;
      })();
      // Global motion preference
      const prefersReducedMotion = window.matchMedia && window.matchMedia('(prefers-reduced-motion: reduce)').matches;
      // Theme setup
      const themeToggle = document.getElementById('themeToggle');
      const savedTheme = localStorage.getItem('theme');
      const initialTheme = savedTheme ? savedTheme : 'dark';
      if (initialTheme === 'light') {
        document.documentElement.setAttribute('data-theme', 'light');
        themeToggle?.setAttribute('aria-pressed', 'true');
      } else {
        document.documentElement.removeAttribute('data-theme');
        themeToggle?.setAttribute('aria-pressed', 'false');
      }

      themeToggle?.addEventListener('click', () => {
        const isLight = document.documentElement.getAttribute('data-theme') === 'light';
        if (isLight) {
          document.documentElement.removeAttribute('data-theme');
          localStorage.setItem('theme', 'dark');
          themeToggle.setAttribute('aria-pressed', 'false');
        } else {
          document.documentElement.setAttribute('data-theme', 'light');
          localStorage.setItem('theme', 'light');
          themeToggle.setAttribute('aria-pressed', 'true');
        }
      });

      // Constellation overlay toggle + drawing (animated)
      const constellationBtn = document.getElementById('constellationToggle');
      const canvas = document.getElementById('constellationCanvas');
      const ctx = canvas.getContext('2d');
      function sizeCanvas() {
        const dpr = window.devicePixelRatio || 1;
        const rect = canvas.getBoundingClientRect();
        canvas.width = Math.max(1, Math.floor(rect.width * dpr));
        canvas.height = Math.max(1, Math.floor(rect.height * dpr));
        ctx.setTransform(dpr, 0, 0, dpr, 0, 0);
      }
      function generatePoints(n = 48) {
        const rect = canvas.getBoundingClientRect();
        const area = Math.max(1, rect.width * rect.height);
        // Scale points by area to keep density consistent and lighter on mobile
        const target = Math.max(24, Math.min(72, Math.round(area / 18000)));
        n = target;
        const pts = [];
        for (let i = 0; i < n; i++) {
          const base = 12 + Math.random() * 22; // px/sec
          const scale = (Math.min(rect.width, rect.height) < 720) ? 0.8 : 1; // a bit slower on small screens
          const speed = base * scale;
          const angle = Math.random() * Math.PI * 2;
          pts.push({
            x: Math.random() * rect.width,
            y: Math.random() * rect.height,
            vx: Math.cos(angle) * speed,
            vy: Math.sin(angle) * speed
          });
        }
        return pts;
      }
      const storedConstellation = localStorage.getItem('constellation');
      let activeConstellation = storedConstellation ? (storedConstellation === 'on') : true; // default ON
      let points = [];
      let rafId = null;
      let lastT = 0;
      function drawConstellation(t = 0) {
        if (!activeConstellation) return;
        const rect = canvas.getBoundingClientRect();
        const w = rect.width, h = rect.height;
        // Update
        const dt = lastT ? Math.min(0.05, (t - lastT) / 1000) : 0;
        lastT = t;
        if (dt) {
          for (const p of points) {
            p.x += p.vx * dt;
            p.y += p.vy * dt;
            if (p.x < 0) { p.x = 0; p.vx *= -1; }
            if (p.x > w) { p.x = w; p.vx *= -1; }
            if (p.y < 0) { p.y = 0; p.vy *= -1; }
            if (p.y > h) { p.y = h; p.vy *= -1; }
          }
        }

        // Draw
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        // Brighter, thicker connections
        ctx.lineWidth = 1.4;
        const threshold = 260;
        const prevComp = ctx.globalCompositeOperation;
        ctx.globalCompositeOperation = 'lighter';
        ctx.shadowBlur = 4;
        ctx.shadowColor = 'rgba(180, 200, 255, 0.6)';
        for (let i = 0; i < points.length; i++) {
          for (let j = i + 1; j < points.length; j++) {
            const dx = points[i].x - points[j].x;
            const dy = points[i].y - points[j].y;
            const d = Math.hypot(dx, dy);
            if (d < threshold) {
              const a = 0.8 * (1 - d / threshold);
              const tw = 0.85 + 0.25 * Math.sin((points[i].x + points[j].y + t * 0.002));
              ctx.globalAlpha = Math.max(0.1, a * tw);
              ctx.strokeStyle = 'rgba(220, 230, 255, 0.9)';
              ctx.beginPath();
              ctx.moveTo(points[i].x, points[i].y);
              ctx.lineTo(points[j].x, points[j].y);
              ctx.stroke();
            }
          }
        }
        ctx.globalAlpha = 1;
        ctx.shadowBlur = 0;
        ctx.globalCompositeOperation = prevComp;

        // Draw points (nodes)
        ctx.fillStyle = 'rgba(225, 235, 255, 0.9)';
        ctx.shadowBlur = 6;
        ctx.shadowColor = 'rgba(200, 220, 255, 0.7)';
        for (const p of points) {
          const r = 1.2 + (Math.sin((p.x + p.y + t * 0.004)) + 1) * 0.7; // ~1.2..2.6px
          ctx.beginPath();
          ctx.arc(p.x, p.y, r, 0, Math.PI * 2);
          ctx.fill();
        }
        ctx.shadowBlur = 0;

        if (!prefersReducedMotion) rafId = requestAnimationFrame(drawConstellation);
      }
      function setConstellation(on) {
        activeConstellation = on;
        localStorage.setItem('constellation', on ? 'on' : 'off');
        constellationBtn?.setAttribute('aria-pressed', on ? 'true' : 'false');
        canvas.style.opacity = on ? '1' : '0';
        // Toggle root class to control other motion (starfield/shooting stars/parallax)
        document.documentElement.classList.toggle('constellation-on', on);
        if (on) {
          sizeCanvas();
          points = generatePoints();
          lastT = 0;
          drawConstellation();
        } else {
          if (rafId) cancelAnimationFrame(rafId);
          rafId = null;
          ctx.clearRect(0, 0, canvas.width, canvas.height);
        }
      }
      setConstellation(activeConstellation);
      window.addEventListener('resize', () => { if (activeConstellation) { sizeCanvas(); points = generatePoints(points.length); } });
      constellationBtn?.addEventListener('click', () => setConstellation(!activeConstellation));

      // Mouse parallax: subtle star/card depth
      const rootStyle = document.documentElement.style;
      const maxStar = 10, maxCard = 5; // px (slightly stronger parallax)
      let parallaxHandler = null;
      function enableParallax(on) {
        if (prefersReducedMotion) return; // always off if reduced motion
        const pointerFine = window.matchMedia && window.matchMedia('(pointer: fine)').matches;
        if (!pointerFine) { // disable on coarse pointers (most touch devices)
          if (parallaxHandler) {
            window.removeEventListener('mousemove', parallaxHandler, { passive: true });
            parallaxHandler = null;
          }
          rootStyle.setProperty('--star-parallax-x', `0px`);
          rootStyle.setProperty('--star-parallax-y', `0px`);
          rootStyle.setProperty('--card-parallax-x', `0px`);
          rootStyle.setProperty('--card-parallax-y', `0px`);
          return;
        }
        if (on && !parallaxHandler) {
          parallaxHandler = (e) => {
            const w = window.innerWidth, h = window.innerHeight;
            const x = (e.clientX / w) * 2 - 1; // -1..1
            const y = (e.clientY / h) * 2 - 1;
            rootStyle.setProperty('--star-parallax-x', `${-x * maxStar}px`);
            rootStyle.setProperty('--star-parallax-y', `${-y * maxStar}px`);
            rootStyle.setProperty('--card-parallax-x', `${x * maxCard}px`);
            rootStyle.setProperty('--card-parallax-y', `${y * maxCard}px`);
          };
          window.addEventListener('mousemove', parallaxHandler, { passive: true });
        } else if (!on && parallaxHandler) {
          window.removeEventListener('mousemove', parallaxHandler, { passive: true });
          parallaxHandler = null;
          rootStyle.setProperty('--star-parallax-x', `0px`);
          rootStyle.setProperty('--star-parallax-y', `0px`);
          rootStyle.setProperty('--card-parallax-x', `0px`);
          rootStyle.setProperty('--card-parallax-y', `0px`);
        }
      }
      // Sync parallax with constellation state
      enableParallax(activeConstellation);

      const contactBtn = document.getElementById('contactBtn');
      const modal = document.getElementById('contactModal');
      const closeBtn = modal.querySelector('[data-close]');
      const dialog = modal.querySelector('.modal-dialog');
      const copyBtn = document.getElementById('copyEmail');
      const copyStatus = document.getElementById('copyStatus');

      function openModal() {
        modal.classList.add('is-open');
        modal.setAttribute('aria-hidden', 'false');
        dialog.focus();
      }

      function closeModal() {
        modal.classList.remove('is-open');
        modal.setAttribute('aria-hidden', 'true');
      }

      contactBtn?.addEventListener('click', (e) => {
        e.preventDefault();
        openModal();
      });

      closeBtn?.addEventListener('click', closeModal);
      modal.addEventListener('click', (e) => {
        if (e.target === modal) closeModal();
      });
      document.addEventListener('keydown', (e) => {
        if (e.key === 'Escape') closeModal();
      });

      copyBtn?.addEventListener('click', async () => {
        const email = 'anirudh.kosgi@gmail.com';
        try {
          if (navigator.clipboard && window.isSecureContext) {
            await navigator.clipboard.writeText(email);
          } else {
            const ta = document.createElement('textarea');
            ta.value = email;
            document.body.appendChild(ta);
            ta.select();
            document.execCommand('copy');
            document.body.removeChild(ta);
          }
          copyStatus.hidden = false;
          copyStatus.textContent = 'Copied!';
          setTimeout(() => (copyStatus.hidden = true), 1500);
        } catch {}
      });
    });
  </script>
</body>
</html>
